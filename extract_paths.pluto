require "cachelib"

local meta_manifest = new CacheManifestReader("/H.Cache.bin")
print("Cache manifest hash: "..b64m_encode(meta_manifest:getHash("/B.Cache.Windows.bin")))

meta_manifest:downloadFile("/B.Cache.Windows.bin", TYPE_MANIFEST)
local main_manifest = new CacheManifestReader("/B.Cache.Windows.bin")

local fh = io.open("manifest paths.txt", "w")
for main_manifest:getPaths() as path do
	fh:write(path, "\n")
end
